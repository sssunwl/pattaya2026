<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ê≥∞ÂòÜËä≠Â†§ÈõÖüáπüá≠Êñ∞Âπ¥Â∫¶ÂÅáÂúò</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="‰πù‰∫îËá≥Â∞ä">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2060/2060206.png">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&family=Playfair+Display:wght@700&display=swap');
        
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #F5F2ED; 
            color: #4A4A4A;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: env(safe-area-inset-bottom);
            margin: 0;
            overflow-x: hidden;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Â∑¶ÂÅ¥Êá∏ÊµÆÂ∞éËà™ - Êõ∏Á±§È¢®Ê†º */
        .bookmark-nav {
            position: fixed;
            left: 0;
            top: 120px; /* Â∑¶‰∏äÊñπ‰ΩçÁΩÆ */
            z-index: 50;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .bookmark-item {
            padding: 10px 16px 10px 12px;
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-top-right-radius: 16px;
            border-bottom-right-radius: 16px;
            box-shadow: 2px 4px 12px rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,0.4);
            border-left: none;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: translateX(-4px); /* È†êË®≠Á®çÂæÆÊî∂ÈÄ≤Âéª */
            cursor: pointer;
        }

        .bookmark-item.active {
            background: rgba(142, 154, 175, 0.95); /* Primary Color */
            color: white;
            transform: translateX(0) scale(1.05);
            padding-right: 20px;
            box-shadow: 4px 4px 15px rgba(142, 154, 175, 0.3);
        }

        /* È†ÅÂÖßÂê∏ÈôÑÂ∞éËà™ (Day 1, Day 2...) */
        .sticky-subnav {
            position: sticky;
            top: 0;
            z-index: 40;
            background: rgba(245, 242, 237, 0.98);
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px -5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .btn-press { transition: transform 0.1s; cursor: pointer; }
        .btn-press:active { transform: scale(0.95); }
        
        /* Modal & Animations */
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .animate-slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            z-index: 60;
            animation: fadeIn 0.2s ease-out;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        
        .modal-content {
            background: #FFFFFF;
            width: 100%;
            min-height: 75vh;
            max-height: 90vh;
            border-top-left-radius: 2.5rem;
            border-top-right-radius: 2.5rem;
            overflow-y: auto;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 70;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 1rem;
            margin-bottom: 1rem;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#F5F2ED',
                        primary: '#8E9AAF',
                        accent: '#E09F7D',
                        dark: '#4A4A4A',
                        card: '#FFFFFF',
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(142, 154, 175, 0.15)',
                        'float': '0 20px 40px -5px rgba(142, 154, 175, 0.2)'
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Ë≥áÊñôÂ∫´ ---
        const MEMBERS = [
            { id: 'lam', name: "Lam", avatar: "ü¶Å" },
            { id: 'ricky', name: "Ricky", avatar: "üêª" },
            { id: 'robin', name: "Robin", avatar: "üêØ" },
            { id: 'jolin', name: "Jolin", avatar: "üê∞" },
            { id: 'pat', name: "Pat", avatar: "ü¶ä" },
            { id: 'masa', name: "Masa", avatar: "üê®" },
            { id: 'yi', name: "Yi", avatar: "üêº" },
            { id: 'justin', name: "Justin", avatar: "üêµ" },
            { id: 'han', name: "Han", avatar: "üë∂" }
        ];

        const WEATHER_DATA = [
            { date: "2/13", icon: "cloud-sun", temp: "31¬∞", label: "Day 1" },
            { date: "2/14", icon: "sun", temp: "32¬∞", label: "Day 2" },
            { date: "2/15", icon: "sun", temp: "29¬∞", label: "Day 3" },
            { date: "2/16", icon: "sun", temp: "30¬∞", label: "Day 4" },
            { date: "2/17", icon: "cloud-sun", temp: "31¬∞", label: "Day 5" },
            { date: "2/18", icon: "plane", temp: "28¬∞", label: "Day 6" },
        ];

        const ITINERARY = [
            {
                day: "Day 1", date: "2/13 (‰∫î)", theme: "„ÄåÊ≥∞„ÄçÂø´ÈñÉ", id: "d1", highlights: "ËêΩÊ©üÂç≥Ë°ùÂ§úÂ∏Ç",
                details: [
                    { id: "e1", time: "14:25", title: "ÊäµÈÅî BKK Ê©üÂ†¥", desc: "Â∞àËªäÊé•ÈÄÅÂæÄËä≠Â†§ÈõÖ", location: "Suvarnabhumi Airport", thai_text: "‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥", icon: "plane", type: "transport", img: "https://images.unsplash.com/photo-1542296332-2e449c29d009?w=800" },
                    { id: "e2", time: "16:30", title: "ÂÖ•‰Ωè Akara Hotel", desc: "Check-in Á®ç‰Ωú‰ºëÊÅØ", location: "Akara Hotel Pattaya", thai_text: "‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏≠‡∏±‡∏Ñ‡∏£‡∏≤ ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "hotel", type: "hotel", img: "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800" },
                    { id: "e3", time: "18:00", title: "È£õÊ©üÂ§úÂ∏ÇÊéÉË°ó", desc: "Terminal 21 ÈñÄÂè£", location: "Runway Street Food Pattaya", thai_text: "‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏±‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "shopping-bag", type: "activity", img: "https://images.unsplash.com/photo-1555243560-ef023c04294a?w=800" },
                    { id: "e4", time: "19:30", title: "Ginger Farm Kitchen", desc: "Á±≥ËäùËìÆÊ≥∞ÂåóËèú", location: "Ginger Farm Kitchen Pattaya", thai_text: "‡∏£‡πâ‡∏≤‡∏ô‡∏à‡∏¥‡∏ô‡πÄ‡∏à‡∏≠‡∏£‡πå ‡∏ü‡∏≤‡∏£‡πå‡∏° ‡∏Ñ‡∏¥‡∏ó‡πÄ‡∏ä‡πà‡∏ô", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800" },
                    { id: "e5", time: "21:30", title: "Makkah Spa", desc: "ËàíÁ∑©È£õË°åÁñ≤Âãû", location: "Makkah Health & Spa Pattaya", thai_text: "‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏≤ ‡πÄ‡∏Æ‡∏•‡∏ó‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏™‡∏õ‡∏≤", icon: "sparkles", type: "spa", img: "https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=800" }
                ]
            },
            {
                day: "Day 2", date: "2/14 (ÂÖ≠)", theme: "„ÄåÊ≥∞„ÄçÁßëÂπª", id: "d2", highlights: "ÊòüÈöõÊé¢Èö™‰πãÊóÖ",
                details: [
                    { id: "e6", time: "11:00", title: "ÂæÄ Space Hotel", desc: "Ë°åÊùéÂ∞àËªäÂ∑≤È†êÁ¥Ñ", location: "Grande Centre Point Space Pattaya", thai_text: "‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° ‡πÅ‡∏Å‡∏£‡∏ô‡∏î‡πå ‡πÄ‡∏ã‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏û‡∏≠‡∏¢‡∏ï‡πå ‡∏™‡πÄ‡∏õ‡∏ã ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "truck", type: "transport", img: "https://images.unsplash.com/photo-1571896349842-6e5c48dc52e3?w=800" },
                    { id: "e7", time: "12:00", title: "Tora Tapas", desc: "ÂçàÈ§êÔºöÊùæÈú≤Âπ≤Ë≤ù", location: "Tora Tapas Pattaya", thai_text: "‡πÇ‡∏ó‡∏£‡∏≤ ‡∏ó‡∏≤‡∏õ‡∏≤‡∏™ ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1514326640560-7d063ef2aed5?w=800" },
                    { id: "e8", time: "14:00", title: "Space Ê∞¥‰∏äÊ®ÇÂúí", desc: "ÁòãÁãÇÁé©Ê∞¥„ÄÅÊºÇÊµÅÊ≤≥", location: "Grande Centre Point Space Pattaya", thai_text: "‡∏™‡∏ß‡∏ô‡∏ô‡πâ‡∏≥‡∏≠‡∏ß‡∏Å‡∏≤‡∏®", icon: "waves", type: "activity", img: "https://images.unsplash.com/photo-1533316447883-492770977218?w=800" },
                    { id: "e9", time: "19:00", title: "Orbit Restaurant", desc: "Êµ∑ÈÆÆËá™Âä©È§êÊîæÈ°å", location: "Grande Centre Point Space Pattaya", thai_text: "‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏≠‡∏£‡πå‡∏ö‡∏¥‡∏ó", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1625937751876-453009747972?w=800" }
                ]
            },
            {
                day: "Day 3", date: "2/15 (Êó•)", theme: "„ÄåÊ≥∞„ÄçÁÜ±Ë°Ä", id: "d3", highlights: "‰ΩõÁ≥ªÂª∫ÁØâËàáË∂äÈáéÈ£õËªä",
                details: [
                    { id: "e10", time: "10:30", title: "ÁúüÁêÜËÅñÊÆø", desc: "Êú®ÈõïËóùË°ì", location: "Sanctuary of Truth", thai_text: "‡∏õ‡∏£‡∏≤‡∏™‡∏≤‡∏ó‡∏™‡∏±‡∏à‡∏ò‡∏£‡∏£‡∏°", icon: "landmark", type: "activity", img: "https://images.unsplash.com/photo-1599553765870-07a828cb0085?w=800" },
                    { id: "e11", time: "13:00", title: "ATV Ë∂äÈáéÈ£õËªä", desc: "Âè¢ÊûóÂÜíÈö™", location: "Pattaya Offroad Safari", thai_text: "‡∏û‡∏±‡∏ó‡∏¢‡∏≤ ‡∏≠‡∏≠‡∏ü‡πÇ‡∏£‡∏î ‡∏ã‡∏≤‡∏ü‡∏≤‡∏£‡∏µ", icon: "car", type: "activity", img: "https://images.unsplash.com/photo-1551816230-ef5deaed4a26?w=800" },
                    { id: "e12", time: "18:30", title: "Bay Bay Seafood", desc: "Êµ∑ÈÆÆ BBQ", location: "BayBay Buffet Talaypao", thai_text: "‡πÄ‡∏ö‡∏¢‡πå‡πÄ‡∏ö‡∏¢‡πå ‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡∏ï‡πå‡∏ó‡∏∞‡πÄ‡∏•‡πÄ‡∏ú‡∏≤", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1534008753122-a837cf46d288?w=800" },
                    { id: "e13", time: "20:30", title: "‰∏≠Â§©Â§úÂ∏Ç", desc: "Êµ∑Êø±Âú∞ÈÅìÊ∞£Ê∞õ", location: "Jomtien Night Market", thai_text: "‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏±‡∏î‡∏à‡∏≠‡∏°‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô", icon: "moon", type: "activity", img: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800" }
                ]
            },
            {
                day: "Day 4", date: "2/16 (‰∏Ä)", theme: "„ÄåÊ≥∞„ÄçÊãõÁ©ç", id: "d4", highlights: "ÁßÅ‰∫∫ÂåÖËàπÊµ∑‰∏äÊ¥æÂ∞ç",
                details: [
                    { id: "e14", time: "10:30", title: "Ë°åÊùéÁõ¥ÈÄÅ Villa", desc: "‰∫∫Ë≤®ÂàÜÊµÅ", location: "Villa De Amore Pattaya", thai_text: "‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ ‡πÄ‡∏î‡∏≠ ‡∏≠‡∏∞‡∏°‡∏≠‡πÄ‡∏£‡πà ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "briefcase", type: "transport", img: "https://images.unsplash.com/photo-1580587771525-78b9dba3b91d?w=800" },
                    { id: "e15", time: "11:30", title: "ÂâçÂæÄÁ¢ºÈ†≠", desc: "Â∞àËªäÊé•ÈÄÅ", location: "Port of Samae Sarn", thai_text: "‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏°‡∏™‡∏≤‡∏£", icon: "anchor", type: "transport", img: "https://images.unsplash.com/photo-1569263979104-565b63418962?w=800" },
                    { id: "e16", time: "13:00", title: "Seanlyn ÁßÅ‰∫∫ÂåÖËàπ", desc: "ÊªëÊ¢Ø„ÄÅÈá£È≠ö„ÄÅBBQ", location: "Samae San Island", thai_text: "‡πÄ‡∏´‡∏°‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß Seanlyn", icon: "ship", type: "activity", img: "https://images.unsplash.com/photo-1544644181-1484b3fdfc62?w=800" },
                    { id: "e17", time: "17:30", title: "ÂÖ•‰Ωè Villa De Amore", desc: "ÁßÅ‰∫∫Ê≥≥Ê±†Âà•Â¢Ö", location: "Villa De Amore Pattaya", thai_text: "‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ ‡πÄ‡∏î‡∏≠ ‡∏≠‡∏∞‡∏°‡∏≠‡πÄ‡∏£‡πà", icon: "home", type: "hotel", img: "https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800" }
                ]
            },
            {
                day: "Day 5", date: "2/17 (‰∫å)", theme: "„ÄåÊ≥∞„ÄçÁ∂≤Á¥Ö", id: "d5", highlights: "ÊâìÂç°È£üÁ•ûÊó•ËêΩ‰πãÊóÖ",
                details: [
                    { id: "e18", time: "11:30", title: "Khun Sri Ë±¨ÈõúÊπØ", desc: "ÊãõÁâåËÉ°Ê§íÊπØÂ∫ï", location: "Khun Sri Pork Blood Soup", thai_text: "‡∏ï‡πâ‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏°‡∏π‡∏Ñ‡∏∏‡∏ì‡∏®‡∏£‡∏µ", icon: "coffee", type: "food", img: "https://images.unsplash.com/photo-1548943487-a2e4e43b485c?w=800" },
                    { id: "e19", time: "13:00", title: "After Yum", desc: "ÂÖ®Ê≥∞ÊúÄÁ¥ÖÁîüÈÜÉ", location: "After Yum", thai_text: "‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏ü‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏¢‡∏≥", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1626804475297-411d0c624f9c?w=800" },
                    { id: "e20", time: "15:00", title: "ÂõõÊñπÊ∞¥‰∏äÂ∏ÇÂ†¥", desc: "È´îÈ©óÊâãÂàíËàπ", location: "Pattaya Floating Market", thai_text: "‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡πâ‡∏≥ 4 ‡∏†‡∏≤‡∏Ñ ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "map", type: "activity", img: "https://images.unsplash.com/photo-1598970434795-0c54fe7c0648?w=800" },
                    { id: "e21", time: "16:30", title: "House of Benedict", desc: "ÂÆ§ÂÖßÂ†¥ÊôØÊîùÂΩ±", location: "House of Benedict Pattaya", thai_text: "‡πÄ‡∏Æ‡∏≤‡∏™‡πå ‡∏≠‡∏≠‡∏ü ‡πÄ‡∏ö‡πÄ‡∏ô‡∏î‡∏¥‡∏Å‡∏ï‡πå", icon: "camera", type: "activity", img: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800" },
                    { id: "e22", time: "18:00", title: "Glass House Boho", desc: "Êó•ËêΩÊµ∑ÈÆÆÈ§ê", location: "The Glass House Boho", thai_text: "‡πÄ‡∏î‡∏≠‡∏∞ ‡∏Å‡∏•‡∏≤‡∏™‡πÄ‡∏Æ‡πâ‡∏≤‡∏™‡πå ‡πÇ‡∏ö‡πÇ‡∏Æ", icon: "sunset", type: "food", img: "https://images.unsplash.com/photo-1537047902294-6228b02e6993?w=800" },
                    { id: "e23", time: "21:00", title: "Oasis Spa", desc: "È´òÁ¥öÂà•Â¢ÖÊåâÊë©", location: "Oasis Spa Pattaya Jomtien", thai_text: "‡πÇ‡∏≠‡πÄ‡∏≠‡∏ã‡∏¥‡∏™ ‡∏™‡∏õ‡∏≤ ‡∏û‡∏±‡∏ó‡∏¢‡∏≤", icon: "sparkles", type: "spa", img: "https://images.unsplash.com/photo-1519823551278-64ac92734fb1?w=800" }
                ]
            },
            {
                day: "Day 6", date: "2/18 (‰∏â)", theme: "„ÄåÊ≥∞„ÄçÂîîÊç®Âæó", id: "d6", highlights: "Êµ∑ÈÆÆË°ùÂà∫ËøîÊ∏Ø",
                details: [
                    { id: "e24", time: "11:00", title: "Villa ÈÄÄÊàø", desc: "Êï¥ÁêÜË°åÊùé", location: "Villa De Amore Pattaya", thai_text: "‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ ‡πÄ‡∏î‡∏≠ ‡∏≠‡∏∞‡∏°‡∏≠‡πÄ‡∏£‡πà", icon: "log-out", type: "hotel", img: "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800" },
                    { id: "e25", time: "11:30", title: "Lek Seafood", desc: "ÊúÄÂæåÊµ∑ÈÆÆË°ùÂà∫", location: "Lek Seafood", thai_text: "‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏•‡πá‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•", icon: "utensils", type: "food", img: "https://images.unsplash.com/photo-1599488615731-7e512819a636?w=800" },
                    { id: "e26", time: "13:15", title: "ÂâçÂæÄÊ©üÂ†¥", desc: "‰∫∫Ë≤®ÂàÜÊµÅÂæÄ BKK", location: "Suvarnabhumi Airport", thai_text: "‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥", icon: "plane", type: "transport", img: "https://images.unsplash.com/photo-1530521954074-e64f6810b32d?w=800" }
                ]
            }
        ];

        const GUIDE_ITEMS = [
            { id: 1, type: "activity", category: "Áé©Ê®Ç", name: "Seanlyn ÂåÖËàπ", tag: "Ë±™ËèØÈï∑Â∞æËàπ", desc: "13:00 - 17:00 | Â∞àÂ±¨ÈõôÂ±§Êú®ËàπÔºåÈÖçÂÇôÊµ∑‰∏äÊªëÊ¢Ø„ÄÅÈÄèÊòéÁç®Êú®Ëàü„ÄÅSUPÔºåÈÇÑËÉΩÂú®Ëàπ‰∏ä BBQ Èá£È≠öÔºÅ", cover: "https://images.unsplash.com/photo-1544644181-1484b3fdfc62?w=600&q=80", video: "M7lc1UVf-VE" }, 
            { id: 2, type: "activity", category: "Áé©Ê®Ç", name: "ATV Ë∂äÈáéËªä", tag: "ÁÜ±Ë°ÄÂÜíÈö™", desc: "13:30 - 15:30 | Á©øË∂äÂè¢ÊûóÊ≥•Âú∞ÔºåÊåëÊà∞ËÖé‰∏äËÖ∫Á¥†ÔºÅÁé©ÂÆåÂæå‰∫´Áî®Êº¢Â†°ËñØÊ¢ù„ÄÇ", cover: "https://images.unsplash.com/photo-1551816230-ef5deaed4a26?w=600&q=80", video: "" },
            { id: 3, type: "hotel", category: "‰ΩèÂÆø", name: "Space Pattaya", tag: "ÁßëÂπªÊú™‰æÜ", desc: "ÂÖ®Ê≥∞È¶ñÂ∫ßÂ§™Á©∫‰∏ªÈ°åÈÖíÂ∫óÔºå31,000ÂëéÊ∞¥‰∏äÊ®ÇÂúíÔºåÊàøÈñìÊúâÊ•µÂÖâÊäïÂΩ±„ÄÇ", cover: "https://images.unsplash.com/photo-1571896349842-6e5c48dc52e3?w=600&q=80", video: "" },
            { id: 4, type: "food", category: "ÁæéÈ£ü", name: "After Yum", tag: "ÁîüÈÜÉÂÇ≥Â•á", desc: "ÂÖ®Ê≥∞ÊúÄÁ¥ÖÁîüÈÜÉÂêçÂ∫óÔºåÂøÖÈªûÁîüÈÜÉ‰∏âÊñáÈ≠öËàáÁÇ∏Ë±¨È†∏ËÇâÔºåÈÖ∏Ëæ£ÈñãËÉÉ„ÄÇ", cover: "https://images.unsplash.com/photo-1626804475297-411d0c624f9c?w=600&q=80", video: "" },
            { id: 5, type: "food", category: "ÁæéÈ£ü", name: "Glass House Boho", tag: "Êó•ËêΩÊôöÈ§ê", desc: "Ê≥¢Â∏åÁ±≥‰∫ûÈ¢®ÊÉÖÔºåÂùêÂú®Ê≤ôÁÅòÊ≤ôÁôº‰∏äÁúãÂ§ïÈôΩÂêÉÊùæÈú≤ËñÑÈ§Ö„ÄÇ", cover: "https://images.unsplash.com/photo-1537047902294-6228b02e6993?w=600&q=80", video: "" },
            { id: 6, type: "hotel", category: "‰ΩèÂÆø", name: "Villa De Amore", tag: "ÁßÅ‰∫∫Èö±‰∏ñ", desc: "9‰∫∫ÂÆ∂Â∫≠Â∞àÂ±¨ÂåÖÂ†¥ÔºåÁßÅ‰∫∫Ê≥≥Ê±†ËàáÂ§ßÂÆ¢Âª≥„ÄÇ", cover: "https://images.unsplash.com/photo-1580587771525-78b9dba3b91d?w=600&q=80", video: "" },
            { id: 7, type: "hotel", category: "‰ΩèÂÆø", name: "Akara Hotel", tag: "ÈÉΩÊúÉËºïÂ•¢", desc: "È†ÇÊ®ìÁÑ°ÈÇäÈöõÊ≥≥Ê±†ÔºåÈ£ΩË¶ΩËä≠Â†§ÈõÖÂ§úÊôØ„ÄÇ", cover: "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&q=80", video: "" },
        ];

        // --- ÂÖ±ÈÄöÁµÑ‰ª∂ ---
        const Icon = ({ name, size = 20, className }) => {
            useEffect(() => { lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const HeroHeader = ({ user, title = "Ê≥∞ÂòÜËä≠Â†§ÈõÖ", subtitle = "‰πù‰∫îËá≥Â∞äÂ∫¶ÂÅáÂúò" }) => (
            <div className="relative h-[260px] w-full overflow-hidden shadow-soft bg-white z-0">
                <img src="https://images.unsplash.com/photo-1595661665673-9a3d4d385226?w=800&q=80" className="w-full h-full object-cover opacity-90" />
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-6 pb-4">
                    <div className="flex items-center gap-2 mb-2">
                        <span className="bg-white/20 backdrop-blur px-2 py-1 rounded-lg text-[10px] font-bold text-white border border-white/30">9‰∫∫Ë°å</span>
                        <span className="bg-accent px-2 py-1 rounded-lg text-[10px] font-bold text-white shadow-sm">Ëæ≤ÊõÜÊñ∞Âπ¥</span>
                    </div>
                    <h1 className="font-serif text-3xl text-white font-bold tracking-wide leading-tight shadow-sm">{title}</h1>
                    <div className="text-white/80 text-xs font-bold mt-1 tracking-wider">{subtitle}</div>
                </div>
                <div className="absolute top-4 right-4 bg-white/90 backdrop-blur pl-1 pr-3 py-1 rounded-full text-xs shadow-lg flex items-center gap-2 border border-white/50 z-50">
                    <span className="text-lg bg-gray-100 rounded-full w-6 h-6 flex items-center justify-center">{user.avatar}</span> 
                    <span className="font-bold text-primary">{user.name.split(' ')[0]}</span>
                </div>
            </div>
        );

        // --- Â∑¶ÂÅ¥Êõ∏Á±§‰∏ªÂ∞éËà™ ---
        const BookmarkNav = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'timeline', label: 'Ë°åÁ®ã', icon: 'calendar' },
                { id: 'guide', label: 'Ë≥áË®ä', icon: 'compass' },
                { id: 'wallet', label: 'Ë®òÂ∏≥', icon: 'wallet' },
                { id: 'tools', label: 'Â∑•ÂÖ∑', icon: 'wrench' },
                { id: 'memory', label: 'Áõ∏Á∞ø', icon: 'image' },
            ];

            return (
                <div className="bookmark-nav">
                    {tabs.map((tab) => (
                        <div 
                            key={tab.id}
                            onClick={() => setActiveTab(tab.id)}
                            className={`bookmark-item ${activeTab === tab.id ? 'active' : ''}`}
                        >
                            <div className="flex flex-col items-center gap-1">
                                <Icon name={tab.icon} size={20} className={activeTab === tab.id ? "text-white" : "text-gray-500"} />
                                <span className={`text-[10px] font-bold writing-vertical ${activeTab === tab.id ? "text-white" : "text-gray-500"}`}>{tab.label}</span>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        // --- È†ÅÂÖßÂê∏ÈôÑÂ≠êÂ∞éËà™ (Sub Nav) ---
        const StickySubNav = ({ items, activeId, onSelect }) => (
            <div className="sticky-subnav flex items-center h-14 px-4 mb-2 overflow-hidden shadow-sm border-b border-gray-100">
                <div className="flex overflow-x-auto no-scrollbar items-center gap-2 w-full">
                    {items.map((item) => (
                        <button key={item.id} onClick={() => onSelect(item.id)} 
                            className={`whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-bold transition-all ${activeId === item.id ? 'bg-primary text-white shadow-md' : 'bg-white text-gray-400 border border-gray-100'}`}>
                            {item.label}
                        </button>
                    ))}
                </div>
            </div>
        );

        // --- Ê≠°ËøéÁôªÂÖ•È†Å ---
        const WelcomeView = ({ onLogin }) => (
            <div className="min-h-screen bg-bg flex flex-col items-center justify-center p-8 animate-fade-in relative overflow-hidden">
                <div className="absolute top-[-10%] left-[-10%] w-64 h-64 bg-primary/10 rounded-full blur-3xl"></div>
                <div className="absolute bottom-[-10%] right-[-10%] w-64 h-64 bg-accent/10 rounded-full blur-3xl"></div>
                <div className="mb-10 text-center relative z-10">
                    <div className="w-24 h-24 bg-white rounded-full mx-auto mb-6 flex items-center justify-center shadow-float text-5xl border-4 border-white/50">üáπüá≠</div>
                    <h1 className="text-3xl font-bold text-dark font-serif tracking-wide mb-2">Ê≥∞ÂòÜËä≠Â†§ÈõÖ</h1>
                    <div className="text-xs text-accent font-bold tracking-[0.2em] uppercase">Luxury Retreat 2026</div>
                </div>
                <div className="w-full max-w-sm bg-white/60 backdrop-blur-md rounded-[2rem] p-6 shadow-soft border border-white/50">
                    <p className="text-center text-gray-500 mb-6 font-medium text-sm">Ë´ãÈÅ∏Êìá‰Ω†ÁöÑË∫´‰ªΩÁôªÂÖ•</p>
                    <div className="grid grid-cols-3 gap-4">
                        {MEMBERS.map(m => (
                            <button key={m.id} onClick={() => onLogin(m)} className="flex flex-col items-center p-3 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all btn-press border border-white/50">
                                <span className="text-3xl mb-1">{m.avatar}</span>
                                <span className="text-[10px] font-bold text-dark">{m.name.split(' ')[0]}</span>
                            </button>
                        ))}
                    </div>
                </div>
            </div>
        );

        // --- Ë©≥Á¥∞Ë°åÁ®ãÂç° ---
        const EventDetailSheet = ({ event, onClose }) => {
            if (!event) return null;
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="relative h-64 w-full bg-gray-200">
                            <img src={event.img} className="w-full h-full object-cover" />
                            <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                            <button onClick={onClose} className="absolute top-4 right-4 bg-black/30 backdrop-blur text-white p-2 rounded-full z-10"><Icon name="x" size={24}/></button>
                            <div className="absolute bottom-0 left-0 w-full p-6 pt-20">
                                <h1 className="text-3xl font-serif font-bold text-white drop-shadow-md">{event.title}</h1>
                                <div className="flex gap-2 mt-2">
                                    <span className="bg-primary/90 text-white text-[10px] px-2 py-1 rounded-md font-bold uppercase backdrop-blur-sm">{event.type}</span>
                                    <span className="bg-white/20 text-white text-[10px] px-2 py-1 rounded-md font-bold flex items-center gap-1 backdrop-blur-sm"><Icon name="clock" size={10}/> {event.time}</span>
                                </div>
                            </div>
                        </div>
                        <div className="p-6 space-y-6">
                            {event.thai_text && (
                                <div className="bg-white/50 rounded-3xl p-6 text-center border border-white shadow-sm relative overflow-hidden group active:scale-[0.98] transition-transform">
                                    <div className="absolute top-0 right-0 bg-primary text-white text-[10px] px-3 py-1 rounded-bl-xl font-bold">SHOW DRIVER</div>
                                    <p className="text-xs text-gray-400 font-bold uppercase tracking-wider mb-2">Show to Staff</p>
                                    <h3 className="text-3xl font-bold text-dark font-serif leading-tight my-2">{event.thai_text}</h3>
                                    <p className="text-sm text-gray-500 mt-2">{event.location}</p>
                                </div>
                            )}
                            <div>
                                <h4 className="font-bold text-dark mb-2">ÈóúÊñºÊ≠§Ë°åÁ®ã</h4>
                                <p className="text-sm text-gray-600 leading-relaxed bg-white/50 p-4 rounded-2xl border border-white">{event.desc}</p>
                            </div>
                            <div>
                                <h4 className="font-bold text-dark mb-2">‰ΩçÁΩÆÂ∞éËà™</h4>
                                <div className="h-40 bg-gray-100 rounded-2xl relative overflow-hidden cursor-pointer group border border-gray-200" onClick={() => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.location)}`, '_blank')}>
                                    <div className="absolute inset-0 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/ec/Mapbox_iOS_SDK_2.jpg')] bg-cover bg-center opacity-50 grayscale group-hover:grayscale-0 transition-all"></div>
                                    <div className="absolute inset-0 flex items-center justify-center">
                                        <button className="bg-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 text-sm font-bold text-dark hover:scale-105 transition-transform">
                                            <Icon name="map-pin" size={16} className="text-red-500" /> Open in Google Maps
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const GuideDetailSheet = ({ item, onClose }) => {
            if (!item) return null;
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="relative h-64 w-full bg-gray-200">
                            <img src={item.cover} className="w-full h-full object-cover" />
                            <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                            <button onClick={onClose} className="absolute top-4 right-4 bg-black/30 backdrop-blur text-white p-2 rounded-full z-10"><Icon name="x" size={24}/></button>
                            <div className="absolute bottom-0 left-0 w-full p-6 pt-20">
                                <span className="bg-accent text-white text-[10px] px-2 py-1 rounded-md font-bold uppercase mb-2 inline-block shadow-sm">{item.tag}</span>
                                <h1 className="text-3xl font-serif font-bold text-white drop-shadow-md">{item.name}</h1>
                            </div>
                        </div>
                        <div className="p-6 space-y-6">
                            {item.video && (
                                <div className="video-container bg-black rounded-2xl overflow-hidden shadow-lg">
                                    <iframe src={`https://www.youtube.com/embed/${item.video}`} frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
                                </div>
                            )}
                            {item.food_img && (
                                <div className="bg-white/60 p-4 rounded-2xl border border-white">
                                    <h4 className="font-bold text-dark text-sm mb-3 flex items-center gap-2"><Icon name="utensils" size={16} className="text-accent" /> ÂøÖÈªûÁæéÈ£ü</h4>
                                    <div className="flex gap-4 items-center">
                                        <img src={item.food_img} className="w-20 h-20 rounded-xl object-cover shadow-sm flex-shrink-0" />
                                        <p className="text-sm text-gray-600 font-medium">{item.highlight}</p>
                                    </div>
                                </div>
                            )}
                            <div>
                                <h4 className="font-bold text-dark mb-2">Ë©≥Á¥∞‰ªãÁ¥π</h4>
                                <p className="text-sm text-gray-600 leading-relaxed text-justify bg-white/40 p-4 rounded-2xl">{item.desc}</p>
                            </div>
                            <button className="w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 btn-press shadow-lg shadow-primary/30" onClick={() => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.name)}`, '_blank')}>
                                <Icon name="map" size={20} /> ÈñãÂïü Google Maps
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- È†ÅÈù¢ 1: Ë°åÁ®ã ---
        const TimelineView = ({ user }) => {
            const [selectedEvent, setSelectedEvent] = useState(null);
            const [activeDay, setActiveDay] = useState('d1');

            const scrollTo = (id) => {
                const el = document.getElementById(id);
                if (el) {
                    const offset = 320; 
                    const y = el.getBoundingClientRect().top + window.scrollY - offset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                    setActiveDay(id);
                }
            };
            const subNavItems = ITINERARY.map((day, i) => ({ id: day.id, label: `Day ${i+1}` }));

            return (
                <div className="min-h-screen bg-bg relative animate-fade-in">
                    <HeroHeader user={user} />
                    <StickySubNav items={subNavItems} activeId={activeDay} onSelect={scrollTo} />
                    
                    {/* Â§©Ê∞£ Bar */}
                    <div className="mb-8 overflow-x-auto no-scrollbar px-6 mt-4">
                        <div className="flex gap-4 w-max">
                            {WEATHER_DATA.map((w, i) => (
                                <div key={i} className={`flex flex-col items-center min-w-[50px] p-2 rounded-xl border bg-white border-white shadow-sm`}>
                                    <span className="text-[10px] text-gray-400 font-bold mb-1">{w.date}</span>
                                    <Icon name={w.icon} size={20} className="text-primary" />
                                    <span className="text-xs font-bold text-dark mt-1">{w.temp}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="px-4 pb-32 space-y-12">
                        {ITINERARY.map((day, index) => (
                            <div key={index} id={day.id} className="scroll-mt-40">
                                <div className="flex items-center gap-3 mb-4 px-2">
                                    <div className="w-2 h-8 bg-accent rounded-full"></div>
                                    <div><h2 className="text-xl font-bold text-dark font-serif">{day.theme}</h2><p className="text-xs text-gray-400 font-bold tracking-wider">{day.date} ‚Ä¢ {day.highlights}</p></div>
                                </div>
                                <div className="space-y-4">
                                    {day.details.map((item, i) => (
                                        <div key={i} onClick={() => setSelectedEvent(item)} className="bg-white p-4 rounded-3xl shadow-soft border border-white relative overflow-hidden cursor-pointer flex gap-4 items-center group active:scale-98 transition-transform">
                                            <div className="flex flex-col items-center min-w-[50px]"><span className="text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded-lg">{item.time}</span></div>
                                            <div className="flex-1 border-l-2 border-gray-100 pl-4 py-1"><div className="font-bold text-dark text-base mb-1">{item.title}</div><div className="text-xs text-gray-400 line-clamp-1">{item.desc}</div></div>
                                            <div className="w-8 h-8 rounded-full bg-bg flex items-center justify-center text-gray-300"><Icon name="chevron-right" size={16} /></div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                    {selectedEvent && <EventDetailSheet event={selectedEvent} onClose={() => setSelectedEvent(null)} />}
                </div>
            );
        };

        // --- È†ÅÈù¢ 2: Ë≥áË®ä ---
        const GuideView = ({ user }) => {
            const [selectedItem, setSelectedItem] = useState(null);
            const [filter, setFilter] = useState("‰ΩèÂÆø");
            const subNavItems = [{ id: '‰ΩèÂÆø', label: '‰ΩèÂÆø' }, { id: 'ÁæéÈ£ü', label: 'ÁæéÈ£ü' }, { id: 'Áé©Ê®Ç', label: 'Áé©Ê®Ç' }];
            const filteredItems = GUIDE_ITEMS.filter(i => i.category === filter);

            return (
                <div className="min-h-screen bg-bg animate-fade-in">
                    <HeroHeader user={user} title="ÊîªÁï•ËàáÈùàÊÑü" subtitle="ÂøÖÂêÉÂøÖÁé©Êá∂‰∫∫ÂåÖ" />
                    <StickySubNav items={subNavItems} activeId={filter} onSelect={setFilter} />
                    <div className="p-4 pb-32">
                        <div className="masonry-grid" style={{ columnCount: 1, columnGap: '12px' }}>
                            {filteredItems.map((item) => (
                                <div key={item.id} className="bg-white rounded-2xl overflow-hidden shadow-soft mb-4 btn-press cursor-pointer relative group" style={{ breakInside: 'avoid' }} onClick={() => setSelectedItem(item)}>
                                    <div className="relative"><img src={item.cover} className="w-full h-auto object-cover" />{item.video && <div className="absolute inset-0 flex items-center justify-center bg-black/20"><div className="bg-white/30 backdrop-blur p-2 rounded-full text-white"><Icon name="play" size={20} fill="currentColor"/></div></div>}</div>
                                    <div className="p-4"><span className="text-[10px] bg-bg px-2 py-1 rounded-md text-gray-500 font-bold tracking-wide uppercase mb-1 inline-block">{item.tag}</span><h3 className="font-bold text-base text-dark leading-tight">{item.name}</h3></div>
                                </div>
                            ))}
                        </div>
                    </div>
                    {selectedItem && <GuideDetailSheet item={selectedItem} onClose={() => setSelectedItem(null)} />}
                </div>
            );
        };

        // --- È†ÅÈù¢ 3: Ë®òÂ∏≥ ---
        const WalletView = ({ user }) => {
            const [activeSection, setActiveSection] = useState('add');
            const subNavItems = [{id:'add', label:'Ë®òÂ∏≥'}, {id:'history', label:'Á¥ÄÈåÑ'}];
            // Ë®òÂ∏≥ÈÇèËºØËàáË≥áÊñô
            const [expenses, setExpenses] = useState([{ id: 1, item: "Ë°åÊùéÁõ¥ÈÄÅËªäË≤ª", cost: 400, currency: "HKD", payer: "lam", splitters: MEMBERS.map(m => m.id), type: "public", category: "‰∫§ÈÄö" }]);
            const [item, setItem] = useState("");
            const [cost, setCost] = useState("");
            const [currency, setCurrency] = useState("THB");
            const [payer, setPayer] = useState(user.id);
            const [splitters, setSplitters] = useState(MEMBERS.map(m => m.id));
            const toggleSplitter = (id) => { if (splitters.includes(id)) setSplitters(splitters.filter(s => s !== id)); else setSplitters([...splitters, id]); };
            const addExpense = () => { if (!item || !cost) return; const newExp = { id: Date.now(), item, cost: parseFloat(cost), currency, payer, splitters, type: "public", category: "ÈõúÈ†Ö" }; setExpenses([newExp, ...expenses]); setItem(""); setCost(""); };
            const publicTotalHKD = expenses.reduce((acc, c) => acc + (c.currency === 'HKD' ? c.cost : c.cost / 4.3), 0);

            return (
                <div className="min-h-screen bg-bg animate-fade-in">
                    <HeroHeader user={user} title="ÂÖ¨Êï∏Ë®òÂ∏≥" subtitle="Ê∏ÖÊ•öÂàÜÂ∏≥‰∏çÂÇ∑ÊÑüÊÉÖ" />
                    <StickySubNav items={subNavItems} activeId={activeSection} onSelect={setActiveSection} />
                    <div className="p-4 pb-32">
                        {activeSection === 'add' && (
                            <div className="space-y-6">
                                <div className="bg-white p-6 rounded-3xl flex justify-between items-center relative overflow-hidden shadow-soft">
                                    <div><div className="text-xs text-gray-500 mb-1 font-bold">ÂÖ¨Â∏≥Á∏ΩÈ°ç (HKD)</div><div className="text-3xl font-serif font-bold text-dark">${publicTotalHKD.toFixed(0)}</div></div>
                                    <div className="text-right z-10"><div className="text-xs text-gray-500 mb-1 font-bold">ÊØè‰∫∫ (√∑8)</div><div className="text-xl font-bold text-accent">${(publicTotalHKD / 8).toFixed(0)}</div></div>
                                </div>
                                <div className="bg-white p-5 rounded-3xl shadow-soft space-y-4 border border-white">
                                    <input placeholder="Ê∂àË≤ªÈ†ÖÁõÆ" value={item} onChange={e => setItem(e.target.value)} className="w-full bg-bg p-3 rounded-xl text-sm outline-none" />
                                    <div className="flex gap-2"><input type="number" placeholder="ÈáëÈ°ç" value={cost} onChange={e => setCost(e.target.value)} className="flex-1 bg-bg p-3 rounded-xl text-sm outline-none" /><select value={currency} onChange={e => setCurrency(e.target.value)} className="bg-bg p-3 rounded-xl text-sm outline-none font-bold text-primary"><option value="THB">THB</option><option value="HKD">HKD</option></select></div>
                                    <div><label className="text-xs text-gray-400 font-bold mb-2 block">Ë™∞‰ªòÈå¢ (ÂñÆÈÅ∏)</label><div className="grid grid-cols-5 gap-2">{MEMBERS.map(m => (<button key={m.id} onClick={() => setPayer(m.id)} className={`p-1 rounded-xl flex flex-col items-center transition-all ${payer === m.id ? 'bg-primary text-white scale-105 shadow-md' : 'bg-bg text-gray-400'}`}><span className="text-lg">{m.avatar}</span><span className="text-[9px] font-bold">{m.name.split(' ')[0]}</span></button>))}</div></div>
                                    <div><div className="flex justify-between items-center mb-2"><label className="text-xs text-gray-400 font-bold">Ë™∞ÂàÜÊî§ (Â§öÈÅ∏)</label><button onClick={() => setSplitters(splitters.length === MEMBERS.length ? [] : MEMBERS.map(m => m.id))} className="text-[10px] text-accent font-bold bg-accent/10 px-2 py-0.5 rounded">ÂÖ®ÈÅ∏/Ê∏ÖÁ©∫</button></div><div className="grid grid-cols-5 gap-2">{MEMBERS.map(m => (<button key={m.id} onClick={() => toggleSplitter(m.id)} className={`p-1 rounded-xl flex flex-col items-center transition-all ${splitters.includes(m.id) ? 'bg-accent text-white shadow-sm' : 'bg-bg text-gray-400 opacity-50'}`}><span className="text-lg">{m.avatar}</span><span className="text-[9px] font-bold">{m.name.split(' ')[0]}</span></button>))}</div></div>
                                    <button onClick={addExpense} className="w-full bg-dark text-white py-3 rounded-xl font-bold btn-press shadow-lg flex items-center justify-center gap-2"><Icon name="plus-circle" size={18} /> Âä†ÂÖ•ÂÖ¨Â∏≥</button>
                                </div>
                            </div>
                        )}
                        {activeSection === 'history' && (
                            <div className="space-y-3">{expenses.map(ex => (<div key={ex.id} className="bg-white p-3 rounded-2xl border border-gray-50 shadow-sm flex justify-between items-center"><div className="flex items-center gap-3"><div className="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-lg">{MEMBERS.find(m => m.id === ex.payer)?.avatar}</div><div><div className="text-sm font-bold text-dark">{ex.item}</div><div className="text-[10px] text-gray-400">{MEMBERS.find(m => m.id === ex.payer)?.name.split(' ')[0]} ‰ªò ‚Ä¢ {ex.splitters.length} ‰∫∫ÂàÜ</div></div></div><div className="text-right"><div className="font-bold text-dark">{ex.currency} {ex.cost}</div>{ex.currency === 'THB' && <div className="text-[10px] text-gray-400">‚âà HKD {(ex.cost/4.3).toFixed(0)}</div>}</div></div>))}</div>
                        )}
                    </div>
                </div>
            );
        };

        // --- È†ÅÈù¢ 4: Â∑•ÂÖ∑ (ToolsView) ---
        const ToolsView = ({ user }) => {
            const [activeSection, setActiveSection] = useState('rate');
            const subNavItems = [{id:'rate', label:'ÂåØÁéá'}, {id:'memo', label:'ÂÇôÂøò'}, {id:'sos', label:'Á∑äÊÄ•'}];
            const [amount, setAmount] = useState('');
            const [currency, setCurrency] = useState('HKD');
            const [result, setResult] = useState('');
            const [personalNote, setPersonalNote] = useState("");
            
            useEffect(() => {
                const savedNote = localStorage.getItem(`pattaya_note_${user.id}`);
                if (savedNote) setPersonalNote(savedNote);
            }, [user.id]);
            const savePersonalNote = (e) => { const val = e.target.value; setPersonalNote(val); localStorage.setItem(`pattaya_note_${user.id}`, val); };
            useEffect(() => { if (!amount) { setResult(''); return; } const rates = { 'HKD': 0.23, 'TWD': 0.90, 'USD': 0.029, 'CNY': 0.20 }; setResult((parseFloat(amount) * rates[currency]).toFixed(2)); }, [amount, currency]);
            const scrollTo = (id) => { const el = document.getElementById(id); if (el) { el.scrollIntoView({ behavior: 'smooth', block: 'center' }); setActiveSection(id); } };

            return (
                <div className="min-h-screen bg-bg animate-fade-in">
                    <HeroHeader user={user} title="ÂØ¶Áî®Â∑•ÂÖ∑" subtitle="ÊóÖÈÄîÂ∞èÂπ´Êâã" />
                    <StickySubNav items={subNavItems} activeId={activeSection} onSelect={scrollTo} />
                    <div className="p-4 pb-32 space-y-6">
                        <div id="rate" className="bg-white p-6 rounded-[2rem] shadow-soft relative overflow-hidden border border-white"><div className="absolute top-0 right-0 w-24 h-24 bg-accent/10 rounded-bl-[4rem]"></div><h3 className="font-bold text-dark mb-4 flex items-center gap-2 relative z-10"><Icon name="coins" className="text-accent" size={18} /> Âç≥ÊôÇÊèõÁÆó (THB)</h3><div className="flex flex-col gap-3 relative z-10"><div className="flex items-center justify-between bg-bg p-3 rounded-2xl"><input type="number" value={amount} onChange={e => setAmount(e.target.value)} className="bg-transparent text-2xl font-bold w-32 outline-none placeholder-gray-300" placeholder="0" /><span className="text-xs font-bold text-gray-400">THB</span></div><div className="flex items-center justify-between bg-primary/10 p-3 rounded-2xl border border-primary/20"><span className="text-2xl font-bold text-primary">{result || '0.00'}</span><select value={currency} onChange={e => setCurrency(e.target.value)} className="bg-transparent text-xs font-bold text-primary outline-none text-right"><option value="HKD">HKD</option><option value="TWD">TWD</option></select></div></div></div>
                        <div id="memo" className="bg-white p-6 rounded-[2rem] shadow-soft border border-white"><h3 className="font-bold text-dark mb-2 flex items-center gap-2"><Icon name="edit-3" className="text-accent" size={18} /> {user.name.split(' ')[0]} ÁöÑË®ò‰∫ãÊú¨</h3><textarea value={personalNote} onChange={savePersonalNote} className="w-full h-32 bg-bg p-4 rounded-xl text-sm outline-none resize-none" placeholder="Ë®ò‰∏ãÊÉ≥Ë≤∑ÁöÑÊù±Ë•ø„ÄÅ‰ª£Ë≥ºÊ∏ÖÂñÆ..."></textarea></div>
                        <div id="sos" className="grid grid-cols-2 gap-4"><a href="tel:1155" className="bg-red-50 p-4 rounded-2xl flex flex-col items-center justify-center text-red-500 border border-red-100 btn-press"><Icon name="phone" size={24} className="mb-1"/><span className="text-xs font-bold">ÊóÖÈÅäË≠¶ÂØü 1155</span></a><a href="tel:191" className="bg-gray-50 p-4 rounded-2xl flex flex-col items-center justify-center text-gray-500 border border-gray-100 btn-press"><Icon name="ambulance" size={24} className="mb-1"/><span className="text-xs font-bold">Á∑äÊÄ•ÊïëË≠∑ 191</span></a></div>
                    </div>
                </div>
            );
        };

        // --- È†ÅÈù¢ 5: Áõ∏Á∞ø (MemoryView) ---
        const MemoryView = ({ user }) => (
            <div className="min-h-screen bg-bg animate-fade-in">
                <HeroHeader user={user} title="ÂõûÊÜ∂Áõ∏Á∞ø" subtitle="‰πù‰∫îËá≥Â∞äÂ∞àÂ±¨" />
                <div className="p-4 pb-32 flex flex-col items-center justify-center h-[50vh] text-center">
                    <div className="w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6 text-primary animate-bounce"><Icon name="image" size={40} /></div>
                    <button onClick={() => window.open('https://photos.google.com', '_blank')} className="bg-primary text-white px-8 py-3 rounded-xl font-bold btn-press shadow-lg shadow-primary/30 flex items-center gap-2"><Icon name="external-link" size={18} /> ÂâçÂæÄÂÖ±‰∫´Áõ∏Á∞ø</button>
                </div>
            </div>
        );

        const App = () => {
            const [user, setUser] = useState(null);
            const [activeTab, setActiveTab] = useState('timeline');

            useEffect(() => {
                const savedUser = localStorage.getItem('pattaya_user');
                if (savedUser) setUser(JSON.parse(savedUser));
            }, []);

            const handleLogin = (u) => {
                setUser(u);
                localStorage.setItem('pattaya_user', JSON.stringify(u));
            };

            if (!user) return <WelcomeView onLogin={handleLogin} />;

            return (
                <div className="min-h-screen bg-bg text-dark font-sans max-w-md mx-auto relative shadow-2xl overflow-hidden">
                    {/* Â∑¶ÂÅ¥‰∏ªÂ∞éËà™ */}
                    <BookmarkNav activeTab={activeTab} setActiveTab={setActiveTab} />
                    
                    <main className="h-full overflow-y-auto no-scrollbar">
                        {activeTab === 'timeline' && <TimelineView user={user} />}
                        {activeTab === 'guide' && <GuideView user={user} />}
                        {activeTab === 'wallet' && <WalletView user={user} />}
                        {activeTab === 'tools' && <ToolsView user={user} />}
                        {activeTab === 'memory' && <MemoryView user={user} />}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>